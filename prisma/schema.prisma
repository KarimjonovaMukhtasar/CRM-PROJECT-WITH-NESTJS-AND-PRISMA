generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url = env("DATABASE_URL")
}

model Branch {
  id          String   @default(uuid()) @id
  name        String   @unique
  logo        String?
  address     String
  createdAt   DateTime   @default(now())  @db.Timestamptz(6)
  updatedAt   DateTime   @updatedAt   @db.Timestamptz(6)

  rooms      Room[]
  groups     Group[]
  courses     Course[]

  @@map("branches")
}

model Room {
  id           String      @default(uuid()) @id
  name         String    @unique
  capacity     Int
  createdAt    DateTime   @default(now())  @db.Timestamptz(6)
  updatedAt    DateTime   @updatedAt   @db.Timestamptz(6)


  branch       Branch   @relation(fields: [branchId], references: [id])
  branchId     String

   @@map("rooms")
}



model Course {
  id              String  @default(uuid()) @id
  name            String  @unique
  price           Decimal   @db.Decimal(12, 2)
  level           String
  durationMonth   Int 
  createdAt       DateTime   @default(now())  @db.Timestamptz(6)
  updatedAt       DateTime   @updatedAt   @db.Timestamptz(6)

  branch       Branch   @relation(fields: [branchId], references: [id])
  branchId     String

  groups      Group[]

  @@map("courses")

}

model Group {
  id          String  @default(uuid()) @id
  name        String  @unique
  startDate   DateTime  
  endDate     DateTime
  createdAt   DateTime   @default(now())  @db.Timestamptz(6)
  updatedAt   DateTime   @updatedAt   @db.Timestamptz(6)

  course       Course     @relation(fields: [courseId], references: [id])
  courseId     String

  branch       Branch   @relation(fields: [branchId], references: [id])
  branchId     String

  @@map("groups")
}
